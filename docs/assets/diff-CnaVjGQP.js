import{s as D}from"./layout-I_7HUYsd.js";/* empty css              */class j{diff(e,n,t={}){let o;typeof t=="function"?(o=t,t={}):"callback"in t&&(o=t.callback);const d=this.castInput(e,t),a=this.castInput(n,t),u=this.removeEmpty(this.tokenize(d,t)),l=this.removeEmpty(this.tokenize(a,t));return this.diffWithOptionsObj(u,l,t,o)}diffWithOptionsObj(e,n,t,o){var d;const a=i=>{if(i=this.postProcess(i,t),o){setTimeout(function(){o(i)},0);return}else return i},u=n.length,l=e.length;let r=1,s=u+l;t.maxEditLength!=null&&(s=Math.min(s,t.maxEditLength));const p=(d=t.timeout)!==null&&d!==void 0?d:1/0,C=Date.now()+p,c=[{oldPos:-1,lastComponent:void 0}];let f=this.extractCommon(c[0],n,e,0,t);if(c[0].oldPos+1>=l&&f+1>=u)return a(this.buildValues(c[0].lastComponent,n,e));let v=-1/0,x=1/0;const E=()=>{for(let i=Math.max(v,-r);i<=Math.min(x,r);i+=2){let m;const g=c[i-1],P=c[i+1];g&&(c[i-1]=void 0);let L=!1;if(P){const y=P.oldPos-i;L=P&&0<=y&&y<u}const w=g&&g.oldPos+1<l;if(!L&&!w){c[i]=void 0;continue}if(!w||L&&g.oldPos<P.oldPos?m=this.addToPath(P,!0,!1,0,t):m=this.addToPath(g,!1,!0,1,t),f=this.extractCommon(m,n,e,i,t),m.oldPos+1>=l&&f+1>=u)return a(this.buildValues(m.lastComponent,n,e))||!0;c[i]=m,m.oldPos+1>=l&&(x=Math.min(x,i-1)),f+1>=u&&(v=Math.max(v,i+1))}r++};if(o)(function i(){setTimeout(function(){if(r>s||Date.now()>C)return o(void 0);E()||i()},0)})();else for(;r<=s&&Date.now()<=C;){const i=E();if(i)return i}}addToPath(e,n,t,o,d){const a=e.lastComponent;return a&&!d.oneChangePerToken&&a.added===n&&a.removed===t?{oldPos:e.oldPos+o,lastComponent:{count:a.count+1,added:n,removed:t,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:t,previousComponent:a}}}extractCommon(e,n,t,o,d){const a=n.length,u=t.length;let l=e.oldPos,r=l-o,s=0;for(;r+1<a&&l+1<u&&this.equals(t[l+1],n[r+1],d);)r++,l++,s++,d.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return s&&!d.oneChangePerToken&&(e.lastComponent={count:s,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,r}equals(e,n,t){return t.comparator?t.comparator(e,n):e===n||!!t.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,t){const o=[];let d;for(;e;)o.push(e),d=e.previousComponent,delete e.previousComponent,e=d;o.reverse();const a=o.length;let u=0,l=0,r=0;for(;u<a;u++){const s=o[u];if(s.removed)s.value=this.join(t.slice(r,r+s.count)),r+=s.count;else{if(!s.added&&this.useLongestToken){let p=n.slice(l,l+s.count);p=p.map(function(C,c){const f=t[r+c];return f.length>C.length?f:C}),s.value=this.join(p)}else s.value=this.join(n.slice(l,l+s.count));l+=s.count,s.added||(r+=s.count)}}return o}}class T extends j{}const M=new T;function b(h,e,n){return M.diff(h,e,n)}D("diff","テキスト比較");const B=document.getElementById("diff-old"),N=document.getElementById("diff-new"),O=document.getElementById("diff-btn"),I=document.getElementById("diff-output");O.addEventListener("click",()=>{const h=B.value,e=N.value,n=b(h,e);I.innerHTML="";const t=document.createDocumentFragment();n.forEach(o=>{const d=document.createElement("span");o.added?d.className="diff-added":o.removed?d.className="diff-removed":d.className="diff-no-change",d.textContent=o.value,t.appendChild(d)}),I.appendChild(t)});
